<!DOCTYPE html>
<html lang="zxx" class="js">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="CryptoPay is a powerful Bitcoin Crypto Currency Wallet and Mining Template with full of customization options and features">
		<!-- Fav Icon  -->
		<link rel="shortcut icon" href="images/favicon.png">
		<!-- Site Title  -->
		<title>Contact - CryptoPay - Bitcoin Crypto Currency Wallet and Mining</title>
		<!-- Vendor Bundle CSS -->
		<link rel="stylesheet" href="assets/css/vendor.bundle.css" >
		<!-- Custom styles for this template -->
		<link href="assets/css/style.css" rel="stylesheet">
		<link href="assets/css/theme.css" rel="stylesheet">
	</head>
	<body>
		<script type="text/javascript">
			function googleTranslateElementInit() {
			  new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
			}
		</script>
		<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

		<!-- Header --> 
		<header class="site-header header-s1 is-sticky">
			<!-- Topbar -->
			<div class="topbar">
				<div class="container">
					<div class="row">
						<div class="col-sm-6">
							<ul class="social">
								<li><a href="#"><em class="fa fa-facebook"></em></a></li>
								<li><a href="#"><em class="fa fa-twitter"></em></a></li>
								<li><a href="#"><em class="fa fa-linkedin"></em></a></li>
								<li><a href="#"><em class="fa fa-google-plus"></em></a></li>
							</ul>
						</div>
						<div class="col-sm-6 al-right">
							<ul class="top-nav">
								<li><a href="signup.html">Register</a></li>
								<li><a href="signup.html">Login</a></li>
								<li><a href="profile.html">Profile</a></li>
								<li><a href="kyc.html">KYC</a></li>
								<li><a href="faqs.html">Help & Support</a></li>
								<li><div id="google_translate_element"></div>								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<!-- #end Topbar -->
			<!-- Navbar -->
			<div class="navbar navbar-primary">
				<div class="container relative">
					<!-- Logo -->
					<a class="navbar-brand" href="index.html">
						<span style="display: flex; gap: 10px; align-items: center;" class="d-flex g-2">
							<img class="logo logo-dark" alt="logo" src="images/favicon.png">
							<h3 style="display: flex; gap: 3px;" class="d-flex">
								<span style="color: black;" class="text-dark" >Crypto</span>
								<span>Pay</span>
							</h3>
						</span>
						<img class="logo logo-light" alt="logo" src="images/logo_white.png">
					</a>
					<!-- #end Logo -->
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mainnav" aria-expanded="false">
							<span class="sr-only">Menu</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<div class="quote-btn"><a class="btn" href="signup.html"><span>get started</span></a></div>
					</div>
					<!-- MainNav -->
					<nav class="navbar-collapse collapse" id="mainnav">
						<ul class="nav navbar-nav">
							<li><a href="index.html">Home</a></li>
							<li><a href="buy-sell.html">Wallet</a></li>
							<!-- <li><a href="wallet-features.html">wallet</a></li> -->
							<li><a href="market-data.html">Market data</a></li>
							<li><a href="contact.html">Contact</a></li>
							<li class="quote-btn hidden-xs hidden-sm"><a class="btn" href="signup.html">get started</a></li>
						</ul>
					</nav>
					<!-- #end MainNav -->
				</div>
			</div>
			<!-- #end Navbar -->
			<!-- Banner/Slider -->
			<!-- <div style="margin-top: 50px;" class="mt-5  pt-5 section container">
				<div class="row text-center">
					<div class="col-md-12">
						<h3> Profile</h3>
					</div>
				</div>
			</div> -->
			<!-- #end Banner/Slider -->
		</header>
     	
       	<!-- Section -->
		<div class="section section-pad">
			<div class="container">
				<div class="row">
					<div class="col-md-8 res-m-bttm">
						<div class="contact-form">
							<marquee class="hide not_done" style="color: #a84426;margin-bottom: 20px; font-weight: 600;"> <span class="glyphicon glyphicon-hand-right" ></span>  You have not submitted your KYC Verification form. </marquee>
							<marquee class="hide pending" style="color: #f7921a;margin-bottom: 20px; font-weight: 600;"> <span class="glyphicon glyphicon-hand-right" ></span>   Please be informed that your KYC is pending approval.</marquee>
							<marquee class="hide completed" style="color: #f7921a;margin-bottom: 20px; font-weight: 600;"><span class="glyphicon glyphicon-hand-right" ></span>  Please be informed that your KYC is pending approval.</marquee>
							<marquee class="hide rejected" style="color: #e70a0a;margin-bottom: 20px; font-weight: 600;"> <span class="glyphicon glyphicon-hand-right" ></span>   Please be informed that your KYC is pending approval.</marquee>
							<h4 style="margin-bottom: 20px;">Personal Info</h4>
							<form id="personal-info-form" class="form-message">
								<!-- <div style="background-color: #f8f8f8; border-radius: 10px; width: 200px; height: 200px;" class="user-image"></div> -->
								<div style="margin-top: 25px;" class="form-group row">
									<div class="form-field col-sm-6">
										<input id="name" name="contact-subject" type="text" placeholder="First Name *" class="form-control required">
									</div>
									<div class="form-field col-sm-6 form-m-bttm">
										<select id="gender" class="form-control" placeholder="gender">
											<option value="">Choose Gender</option>
											<option value="Male">MALE</option>
											<option value="Female">FEMALE</option>
										</select>
										<!-- <input name="contact-name" type="text" placeholder="Last Name *" class="form-control required"> -->
									</div>
								</div>
								<div class="form-group row">
									<div class="form-field col-sm-6 form-m-bttm">
										<input id="phone" name="contact-phone" type="text" placeholder="Phone Number *" class="form-control required">
									</div>
									<div class="form-field col-sm-6">
										<input disabled id="email" name="contact-email" type="email" placeholder="Email *" class="form-control required email">
									</div>
								</div>
								<div class="form-group row">
									<div class="form-field col-md-12">
										<textarea id="address" name="contact-message" placeholder="Address" class="txtarea form-control required"></textarea>
									</div>
								</div>
								<input type="text" class="hidden" name="form-anti-honeypot" value="">
								<button type="submit" class="btn btn-alt">Save Changes</button>
							</form>
						</div>
						<div style="margin-top: 50px;" class="contact-form">
							<h4 style="margin-bottom: 20px;">Withdrawal Details</h4>
							<form id="wallet-form" class="form-message">
								<div style="margin-top: 25px;" class="form-group row">
									<div class="form-field col-sm-12 form-m-bttm">
										<input id="bitcoin" name="contact-name" type="text" placeholder="Bitcoin wallet address *" class="form-control required">
									</div>
									<!-- <div class="form-field col-sm-6">
										<input name="contact-email" type="email" placeholder="Email *" class="form-control required email">
									</div> -->
								</div>
								<div class="form-group row">
									<div class="form-field col-sm-12 form-m-bttm">
										<input id="ethereum" name="contact-phone" type="text" placeholder="Ethereum wallet address*" class="form-control required">
									</div> 
								</div>
								<div class="form-group row">
									<div class="form-field col-sm-12">
										<input id="solanar" name="contact-subject" type="text" placeholder="Solanar wallet address *" class="form-control required">
									</div>
								</div>
								<div class="form-group row">
									<div class="form-field col-sm-12">
										<input id="usdt" name="contact-subject" type="text" placeholder="USDT wallet address *" class="form-control required">
									</div>
								</div>
								<input type="text" class="hidden" name="form-anti-honeypot" value="">
								<button type="submit" class="btn btn-alt">Save Changes</button>
							</form>
						</div>
						<div style="margin-top: 50px;" class="contact-form">
							<h4 style="margin-bottom: 20px;">Security</h4>
							<form id="password-form" class="form-message">
								<div  style="margin-bottom: 10px; font-weight: 500; color: red;" id="form-results" class="form-results"></div>
								<div style="margin-top: 25px;" class="form-group row">
									<div class="form-field col-sm-12 form-m-bttm">
										<input id="old_password" name="contact-name" type="password" placeholder="Old Password *" class="form-control required">
									</div>
									<!-- <div class="form-field col-sm-6">
										<input name="contact-email" type="email" placeholder="Email *" class="form-control required email">
									</div> -->
								</div>
								<div class="form-group row">
									<div class="form-field col-sm-6 form-m-bttm">
										<input id="new_password" name="contact-phone" type="password" placeholder="New Password *" class="form-control required">
									</div>
									<div class="form-field col-sm-6">
										<input id="password_confirmation" name="contact-subject" type="password" placeholder="Confirm New Password *" class="form-control required">
									</div>
								</div>
								<input type="password" class="hidden" name="form-anti-honeypot" value="">
								<button style="margin-top: 20px;" type="submit" class="btn btn-alt">Save Changes</button>
							</form>
						</div>
					</div><!-- .col  -->
					<div class="col-md-4">
						<div id="gMap" class="google-map"></div>
						<a href="#" class="map-link">View on google map <span class="fa fa-caret-right"></span></a>
					</div><!-- .col  -->
				</div>
			</div>	
		</div>
		<!-- End Section -->
      	
		<!-- Section Footer -->
		<div class="footer-section section section-pad-md light bg-footer">
			<div class="imagebg footerbg">
				<img src="images/footer-bg.png" alt="footer-bg">
			</div>
			<div class="container">
				<div class="row">
					<div class="col-md-3 col-sm-6 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-menu">
							<h5 class="wgs-title ucap">Services</h5>
							<div class="wgs-content">
								<ul class="menu">
									<li><a href="#">Buy Bitcoins</a></li>
									<li><a href="#">Buy Ethereum</a></li>
									<li><a href="#">Sell Bitcoins</a></li>
									<li><a href="#">Bitcoin Trading</a></li>
									<li><a href="#">Margin Trading</a></li>
								</ul>
							</div>
						</div>
						<!-- End Widget -->
					</div>
					<div class="col-md-3 col-sm-6 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-menu">
							<h5 class="wgs-title ucap">Information</h5>
							<div class="wgs-content">
								<ul class="menu">
									<li><a href="#">Payment Options</a></li>
									<li><a href="#">Fee Schedule</a></li>
									<li><a href="#">Getting Started</a></li>
									<li><a href="#">Identity Verification Guide</a></li>
									<li><a href="#">Card Verification Guide</a></li>
								</ul>
							</div>
						</div>
						<!-- End Widget -->
					</div>
					<div class="col-md-3 col-sm-6 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-post">
							<h5 class="wgs-title ucap">Recent Blog</h5>
							<div class="wgs-content">
								<div class="wgs-post-single">
									<div class="wgs-post-thumb">
										<img src="images/post-thumb-sm-b.jpg" alt="post-thumb">
									</div>
									<div class="wgs-post-entry">
										<h6 class="wgs-post-title"><a href="blog-single.html">Working Hard to Keep Pace with Demand </a></h6>
										<span class="wgs-post-meta">December 19, 2017</span>
									</div>
								</div>
								<div class="wgs-post-single">
									<div class="wgs-post-thumb">
										<img src="images/post-thumb-sm-c.jpg" alt="post-thumb">
									</div>
									<div class="wgs-post-entry">
										<h6 class="wgs-post-title"><a href="blog-single.html">Working Hard to Keep Pace with Demand </a></h6>
										<span class="wgs-post-meta">December 19, 2017</span>
									</div>
								</div>
							</div>
						</div>
						<!-- End Widget -->
					</div>
					<div class="col-md-3 col-sm-6 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-contact">
							<h5 class="wgs-title ucap">get in touch</h5>
							<div class="wgs-content">
								<ul class="wgs-contact-list">
									<li><span class="pe pe-7s-map-marker"></span>217 Summit Boulevard <br/>Birmingham, AL 35243</li>
									<li><span class="pe pe-7s-call"></span>Telephone : (123) 4567 8910 <br/>Telephone : (123) 1234 5678</li>
									<li><span class="pe pe-7s-global"></span>Email : <a href="mailto:info@sitename.com">info@sitename.com</a> <br/>Web : <a href="http://example.com">www.example.com</a></li>
								</ul>
							</div>
						</div>
						<!-- End Widget -->
					</div>
				</div>
			</div>	
		</div>
		<!-- End Section -->
		
		<!-- Copyright -->
		<div class="copyright light">
			<div class="container">
				<div class="row">
					<div class="site-copy col-sm-7">
						<p>Copyright &copy; 2018 CryptoPay.
							 <!-- Template Made by <a href="https://themeforest.net/user/softnio/portfolio?ref=softnio">Softnio</a> -->
							</p>
					</div>
					<div class="col-sm-5 text-right mobile-left">
						<ul class="social">
							<li><a href="#"><em class="fa fa-facebook"></em></a></li>
							<li><a href="#"><em class="fa fa-twitter"></em></a></li>
							<li><a href="#"><em class="fa fa-linkedin"></em></a></li>
							<li><a href="#"><em class="fa fa-google-plus"></em></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!-- End Copyright -->
		
		<!-- Preloader !remove please if you do not want -->
		<div id="preloader"><div id="status">&nbsp;</div></div> 
		<!-- Preloader End -->

				<!-- Loader -->
				<div class="custom-loader hide-element" >
					<img width="40" src="./assets/images/loading.gif" alt="">
				</div>
				<!-- LoaderEnd -->
		
		<!-- Google Map Script -->
		<script src="https://maps.google.com/maps/api/js?key=AIzaSyD6cxB4idvB67_Mz1ScQn-_nBJmltUaS-g"></script> 
		<script src="assets/js/googleMap.js"></script>
		
		<!-- JavaScript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		
		<script src="assets/js/jquery.bundle.js"></script>
		<script src="assets/js/script.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.1/axios.min.js"></script>

		<script>
			let wallet_id = null;
			const base_url='http://127.0.0.1:8000/api/';
			const headers = {
				'Accept':'application/json',
				'Content-Type':'application/json',
				'Authorization': `Bearer ${window.localStorage.getItem('crypto_token')}`,
			}

			const form_result = document.querySelector('#form-results');
			const profile_form = document.querySelector('#personal-info-form');
			const wallet_form = document.querySelector('#wallet-form');
			const password_form = document.querySelector('#password-form');

			const name = document.querySelector('#name');
			const phone = document.querySelector('#phone');
			const email = document.querySelector('#email');
			const address = document.querySelector('#address');
			const gender = document.querySelector('#gender');

			const bitcoin = document.querySelector('#bitcoin');
			const solanar = document.querySelector('#solanar');
			const ethereum = document.querySelector('#ethereum');
			const usdt = document.querySelector('#usdt');
			
			const old_password = document.querySelector('#old_password');
			const new_password = document.querySelector('#new_password');
			const password_confirmation = document.querySelector('#password_confirmation');
			
			const not_done_marquee = document.querySelector('.not_done');
			const pending_marquee = document.querySelector('.pending');
			const completed_marquee = document.querySelector('.completed');
			const rejected_marquee = document.querySelector('.rejected');


			const loader = document.querySelector('.custom-loader');
			const showLoader = () => loader.classList.remove('hide-element');
			const hideLoader = () => loader.classList.add('hide-element');

			

			const getUser = async () => {
				await axios.get(`${base_url}profile`,{ headers })
				.then(res =>{
					wallet_id = res.data.data.wallet_id;
					name.defaultValue = res.data.data.name;
					phone.defaultValue = res.data.data.phone;
					email.defaultValue = res.data.data.email;
					gender.selected = res.data.data.gender;
					address.defaultValue = res.data.data.address ?? "";
					
					bitcoin.value = res.data.data.wallet.bitcoin_wallet_address;
					solanar.value = res.data.data.wallet.solanar_wallet_address;
					usdt.value = res.data.data.wallet.usdt_wallet_address;
					ethereum.value = res.data.data.wallet.ethereum_wallet_address ?? "";

					if(!res.data.data.kyc){
						not_done_marquee.classList.remove('hide');
					}else{
						if(res.data.data.kyc.status == 1) pending_marquee.classList.remove('hide');
						if(res.data.data.kyc.status == 2) completed_marquee.classList.remove('hide');
						if(res.data.data.kyc.status == 3) rejected_marquee.classList.remove('hide');
					}

				}).catch(e => console.log(e.message));
			}

			const updateProfile = async () => {
				const data = {
					name: name.value,
					phone: phone.value,
					gender: gender.value,
					address: address.value,
				}
				showLoader()
				await axios.patch(`${base_url}profile`, {...data},{ headers })
				.then(res =>{
					 window.location.reload();
				}).catch(e => console.log(e.message));
				hideLoader()
			}

			const updateWallet = async () => {
				const data = {
					ethereum_wallet_address: ethereum.value,
					solanar_wallet_address: solanar.value,
					usdt_wallet_address: usdt.value,
					bitcoin_wallet_address: bitcoin.value,
				}

				showLoader()
				await axios.patch(`${base_url}wallet/${wallet_id}`, {...data},{ headers })
				.then(res =>{
					 window.location.reload();
				}).catch(e => console.log(e.message));
				hideLoader()
			}

			const changePassword = async () => {
				const data = {
					old_password: old_password.value,
					new_password: new_password.value,
				}

				form_result.classList.remove('show-form-result');
				showLoader()
				await axios.post(`${base_url}change-password`, {...data},{ headers })
				.then(res =>{
					 window.location.reload();
				}).catch(e =>{
					form_result.classList.add('show-form-result');
					form_result.textContent = e.response.data.message;
				});
				hideLoader()
			}


			// Event Listeners
			profile_form.addEventListener('submit', async (e) => {
				e.preventDefault();
				await updateProfile();
			})

			wallet_form.addEventListener('submit', async (e) => {
				e.preventDefault();
				await updateWallet();
			})

			password_form.addEventListener('submit', async (e) => {
				e.preventDefault();
				await changePassword();
			})

			// Function calls
			getUser();


		</script>
		
	</body>
</html>
