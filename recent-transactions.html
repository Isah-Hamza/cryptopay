<!DOCTYPE html>
<html lang="zxx" class="js">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="description" content="CryptoCoin is a powerful Bitcoin Crypto Currency Wallet and Mining Template with full of customization options and features">
		<!-- Fav Icon  -->
		<link rel="shortcut icon" href="images/favicon.png">
		<!-- Site Title  -->
		<title>Typography - CryptoCoin - Bitcoin Crypto Currency Wallet and Mining Template</title>
		<!-- Vendor Bundle CSS -->
		<link rel="stylesheet" href="assets/css/vendor.bundle.css" >
		<!-- Custom styles for this template -->
		<link href="assets/css/style.css" rel="stylesheet">
		<link href="assets/css/theme.css" rel="stylesheet">
	</head>
	<body>
	
		<!-- Header --> 
		<header class="site-header header-s1 is-sticky">
			<!-- Topbar -->
			<div class="topbar">
				<div class="container">
					<div class="row">
						<div class="col-sm-6">
							<ul class="social">
								<li><a href="#"><em class="fa fa-facebook"></em></a></li>
								<li><a href="#"><em class="fa fa-twitter"></em></a></li>
								<li><a href="#"><em class="fa fa-linkedin"></em></a></li>
								<li><a href="#"><em class="fa fa-google-plus"></em></a></li>
							</ul>
						</div>
						<div class="col-sm-6 al-right">
							<ul class="top-nav">
								<li><a href="faqs.html">Help & Support</a></li>
								<li><a href="signup.html">Login</a></li>
								<li><a href="signup.html">Register</a></li>
								<li><a href="profile.html">Profile</a></li>
								<li><a href="kyc.html">KYC</a></li>
							</ul>
						</div>
					</div>
				</div>
			</div>
			<!-- #end Topbar -->
			<!-- Navbar -->
			<div class="navbar navbar-primary">
				<div class="container relative">
					<!-- Logo -->
					<a class="navbar-brand" href="index.html">
						<span style="display: flex; gap: 10px; align-items: center;" class="d-flex g-2">
							<img class="logo logo-dark" alt="logo" src="images/favicon.png">
							<h3 style="display: flex; gap: 3px;" class="d-flex">
								<span style="color: black;" class="text-dark" >Crypto</span>
								<span>Pay</span>
							</h3>
						</span>
						<img class="logo logo-light" alt="logo" src="images/logo_white.png">
					</a>
					<!-- #end Logo -->
					<div class="navbar-header">
						<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#mainnav" aria-expanded="false">
							<span class="sr-only">Menu</span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
							<span class="icon-bar"></span>
						</button>
						<div class="quote-btn"><a class="btn" href="contact.html"><span>get started</span></a></div>
					</div>
					<!-- MainNav -->
					<nav class="navbar-collapse collapse" id="mainnav">
						<ul class="nav navbar-nav">
							<li><a href="index.html">Home</a></li>
							<li><a href="buy-sell.html">Wallet</a></li>
							<!-- <li><a href="wallet-features.html">wallet</a></li> -->
							<li><a href="market-data.html">Market data</a></li>
							<li><a href="contact.html">Contact</a></li>
							<li class="quote-btn hidden-xs hidden-sm"><a class="btn" href="signup.html">get started</a></li>
						</ul>
					</nav>
					<!-- #end MainNav -->
				</div>
			</div>
			<!-- #end Navbar -->
			<!-- Banner/Slider -->
			<div class="page-head section row-vm light">
				<div class="imagebg">
					<img src="images/page-inside-bg.jpg" alt="page-head">
				</div>
				<div class="container">
					<div class="row text-center">
						<div class="col-md-12">
							<h2>Recent Transactions</h2>
							<div class="page-breadcrumb">
								<ul class="breadcrumb">
									<li><a href="index.html">Home</a></li>
									<li class="active"><span>transactions</span></li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- #end Banner/Slider -->
		</header>
    	
     	<!-- Content -->
		<div class="section secion-contents section-pad">
			<div class="container">
				<div class="content row">
					<div class="content-section">
						<h5 class="heading-sm-lead color-secondary with-line">Your Transactions</h5>
						<div class="gaps"></div>
						<div class="table-responsive">          
							<table class="table">
							<thead>
								<tr>
									<th>S/NO</th>
									<th>Transaction Type</th>
									<th>Amount</th>
									<th>Profit Made</th>
									<th>Date</th>
									<th>Time</th>
									<th>Status</th>
								</tr>
							</thead>
							<tbody id="tbody">
							</tbody>
							</table>
						</div>
					</div>

				</div>
			</div>
		</div>
		<!-- End Content -->
    	
       	<!-- Section Footer -->
		<div class="footer-section section section-pad-md light bg-footer">
			<div class="imagebg footerbg">
				<img src="images/footer-bg.png" alt="footer-bg">
			</div>
			<div class="container">
				<div class="row">
					<div class="col-md-3 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-menu">
							<h5 class="wgs-title ucap">Services</h5>
							<div class="wgs-content">
								<ul class="menu">
									<li><a href="#">Buy Bitcoins</a></li>
									<li><a href="#">Buy Ethereum</a></li>
									<li><a href="#">Sell Bitcoins</a></li>
									<li><a href="#">Bitcoin Trading</a></li>
									<li><a href="#">Margin Trading</a></li>
								</ul>
							</div>
						</div>
						<!-- End Widget -->
					</div>
					<div class="col-md-3 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-menu">
							<h5 class="wgs-title ucap">Information</h5>
							<div class="wgs-content">
								<ul class="menu">
									<li><a href="#">Payment Options</a></li>
									<li><a href="#">Fee Schedule</a></li>
									<li><a href="#">Getting Started</a></li>
									<li><a href="#">Identity Verification Guide</a></li>
									<li><a href="#">Card Verification Guide</a></li>
								</ul>
							</div>
						</div>
						<!-- End Widget -->
					</div>
					<div class="col-md-3 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-post">
							<h5 class="wgs-title ucap">Recent Blog</h5>
							<div class="wgs-content">
								<div class="wgs-post-single">
									<div class="wgs-post-thumb">
										<img src="images/post-thumb-sm-b.jpg" alt="post-thumb">
									</div>
									<div class="wgs-post-entry">
										<h6 class="wgs-post-title"><a href="blog-single.html">Working Hard to Keep Pace with Demand </a></h6>
										<span class="wgs-post-meta">December 19, 2017</span>
									</div>
								</div>
								<div class="wgs-post-single">
									<div class="wgs-post-thumb">
										<img src="images/post-thumb-sm-c.jpg" alt="post-thumb">
									</div>
									<div class="wgs-post-entry">
										<h6 class="wgs-post-title"><a href="blog-single.html">Working Hard to Keep Pace with Demand </a></h6>
										<span class="wgs-post-meta">December 19, 2017</span>
									</div>
								</div>
							</div>
						</div>
						<!-- End Widget -->
					</div>
					<div class="col-md-3 wgs-box res-m-bttm">
						<!-- Each Widget -->
						<div class="wgs-footer wgs-contact">
							<h5 class="wgs-title ucap">get in touch</h5>
							<div class="wgs-content">
								<ul class="wgs-contact-list">
									<li><span class="pe pe-7s-map-marker"></span>1234 Sed ut perspiciatis Road, <br/>At vero eos, D58 8975, London.</li>
									<li><span class="pe pe-7s-call"></span>Telephone : (123) 4567 8910 <br/>Telephone : (123) 1234 5678</li>
									<li><span class="pe pe-7s-global"></span>Email : <a href="mailto:info@sitename.com">info@sitename.com</a> <br/>Web : <a href="http://example.com">www.example.com</a></li>
								</ul>
							</div>
						</div>
						<!-- End Widget -->
					</div>
				</div>
			</div>	
		</div>
		<!-- End Section -->
		
		<!-- Copyright -->
		<div class="copyright light">
			<div class="container">
				<div class="row">
					<div class="site-copy col-sm-7">
						<p>Copyright &copy; 2024 CryptoPay.
							 <!-- Template Made by <a href="https://themeforest.net/user/softnio/portfolio?ref=softnio">Softnio</a> -->
							</p>
					</div>
					<div class="col-sm-5 text-right mobile-left">
						<ul class="social">
							<li><a href="#"><em class="fa fa-facebook"></em></a></li>
							<li><a href="#"><em class="fa fa-twitter"></em></a></li>
							<li><a href="#"><em class="fa fa-linkedin"></em></a></li>
							<li><a href="#"><em class="fa fa-google-plus"></em></a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
		<!-- End Copyright -->
		
		<!-- Preloader !remove please if you do not want -->
		<div id="preloader"><div id="status">&nbsp;</div></div>
		<!-- Preloader End -->
		
		<!-- JavaScript
		================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->

		<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.1/axios.min.js"></script>
		<script src="assets/js/jquery.bundle.js"></script>
		<script src="assets/js/script.js"></script>

		<script>
			const tbody = document.querySelector('#tbody');
			const base_url='http://127.0.0.1:8000/api/';
			const headers = {
				'Accept':'application/json',
				'Content-Type':'application/json',
				'Authorization': `Bearer ${window.localStorage.getItem('crypto_token')}`,
			}
			let transactions = [];
			const statuses = {
				1:"Pending",
				2:"Approved",
				3:"Rejected",
			}

			function formatDate(isoDate,type) {
				console.log(isoDate);
				const date = new Date(isoDate);
				const options = {
					year: 'numeric',
					month: 'long',
					day: 'numeric',
				};

				const formattedDate = date.toLocaleString('en-US', options);

				const formattedTime = date.toLocaleTimeString('en-US', Â  
				{
					hour: 'numeric',
					minute: 'numeric',
					second: 'numeric',
					timeZoneName: 'short'
				});

				if(type == 'date') return formattedDate
				else return formattedTime
				// return { formattedDate, formattedTime };
			}

			const getTransactions = async () => {
				await axios.get(`${base_url}user-transactions`,{ headers })
				.then(res =>{
					transactions = res.data.data.data;
					console.log(transactions);

					transactions.map((item,idx) => {
						const tr = document.createElement('tr')

						const id = document.createElement('td')
						id.textContent = idx+1;
						tr.appendChild(id);
						
						const type = document.createElement('td')
						type.textContent = item.type ?? 'Wallet Funding';
						tr.appendChild(type);
						
						const amount = document.createElement('td')
						amount.textContent = `$${item.amount.toLocaleString('en-US')}`;
						amount.classList.add('font_500');
						tr.appendChild(amount);
						
						const profit = document.createElement('td')
						profit.textContent = `$${item.profit.toLocaleString('en-US')}`;
						profit.classList.add('font_500');
						tr.appendChild(profit);
						
						const date = document.createElement('td')
						const date_result = formatDate(item.created_at,'date');
						date.innerText = date_result;
						tr.appendChild(date);
						
						const time = document.createElement('td')
						const result = formatDate(item.created_at,'time');
						time.innerText = result.split('GMT')[0];
						tr.appendChild(time);
						
						const status = document.createElement('td')
						status.innerText = statuses[item.status];
						status.classList.add( item.status == '1' ?'yellow': item.status == '2' ? 'green' : 'red');
						tr.appendChild(status);

						tbody.appendChild(tr);

					})

				}).catch(e => console.log(e.message));
			}


			// Function calls
			getTransactions();

		</script>
		
	</body>
</html>
